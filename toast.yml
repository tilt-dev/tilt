image: gcr.io/windmill-public-containers/tilt-toast@sha256:232b4f5b187da1bedc3bd6fcc0d07a8d33c169fa9430ac0105da7efb5a65ca9f
tasks:
  proto:
    input_paths:
      - pkg/webview/view.proto
    output_paths:
      - pkg/webview/view.pb.go
      - pkg/webview/view.pb.gw.go
    command: protoc -I. -I/usr/include -I"$(go env GOPATH)"/src/github.com/grpc-ecosystem/grpc-gateway/third_party/googleapis --grpc-gateway_out=logtostderr=true:. --go_out=plugins=grpc,paths=source_relative:. pkg/webview/view.proto && goimports -local github.com/windmilleng/tft -w pkg/webview/view.pb.go
  wire:
    location: /go/src/github.com/windmilleng/tilt
    input_paths:
      - assets
      - cmd
      - integration
      - internal
      - pkg
      - synclet
      - web
      - vendor
      - Makefile
    output_paths:
      - ./internal/cli/wire_gen.go
      - ./internal/synclet/wire_gen.go
      - ./internal/engine/wire_gen.go
    command: wire ./internal/engine && wire ./internal/cli && wire ./internal/synclet && make goimports
